<!DOCTYPE html>
<html>
<head>
    <base href="http://localhost:8079/"/>
    <title></title>
    <style type="text/css">
        .Button {
            display: inline-block;
            outline: none;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
            font: 14px/100% Arial, Helvetica, sans-serif;
            padding: .5em 2em .55em;
            -webkit-border-radius: .5em;
            -moz-border-radius: .5em;
            border-radius: .5em;
            -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, .2);
            -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, .2);
            box-shadow: 0 1px 2px rgba(0, 0, 0, .2);
            color: #fef4e9;
            border: solid 1px #1D73F7;
            background: #1D73F7;
            background: -webkit-gradient(linear, left top, left bottom, from(#1D73F7), to(#1D51F7));
        }

    </style>
    <script type="text/javascript" src="http://localhost:8079/plug-in/jquery/jquery-1.8.3.js"></script>
    <script type="text/javascript" src="http://localhost:8079/plug-in/tools/dataformat.js"></script>
    <link rel="stylesheet" type="text/css" href="http://localhost:8079/plug-in/accordion/css/accordion.css">
    <link id="easyuiTheme" rel="stylesheet" href="http://localhost:8079/plug-in/easyui/themes/metrole/easyui.css"
          type="text/css"></link>
    <link id="easyuiTheme" rel="stylesheet" href="plug-in/easyui/themes/metrole/icon.css" type="text/css"></link>
    <script type="text/javascript" src="http://localhost:8079/plug-in/easyui/jquery.easyui.min.1.3.2.js"></script>
    <script type="text/javascript" src="http://localhost:8079/plug-in/easyui/locale/zh-cn.js"></script>
    <script type="text/javascript" src="http://localhost:8079/plug-in/tools/syUtil.js"></script>
    <script type="text/javascript" src="http://localhost:8079/plug-in/My97DatePicker/WdatePicker.js"></script>
    <link rel="stylesheet" href="http://localhost:8079/plug-in/tools/css/metrole/common.css" type="text/css"></link>
    <link rel="stylesheet" href="http://localhost:8079/plug-in/ace/css/font-awesome.css" type="text/css"></link>
    <script type="text/javascript" src="http://localhost:8079/plug-in/lhgDialog/lhgdialog.min.js?skin=metrole"></script>
    <script type="text/javascript" src="http://localhost:8079/plug-in/layer/layer.js"></script>
    <script type="text/javascript" src="http://localhost:8079/plug-in/tools/curdtools_zh-cn.js"></script>
    <script type="text/javascript" src="http://localhost:8079/plug-in/tools/easyuiextend.js"></script>
    <link id="easyuiTheme" rel="stylesheet" href="http://localhost:8079/plug-in/easyui/themes/metrole/main.css"
          type="text/css"></link>
    <link rel="stylesheet" href="http://localhost:8079/plug-in/uploadify/css/uploadify.css" type="text/css"></link>
    <script type="text/javascript" src="http://localhost:8079/plug-in/uploadify/jquery.uploadify-3.1.js"></script>
    <script type="text/javascript" src="http://localhost:8079/plug-in/tools/Map.js"></script>
    <script type="text/javascript"
            src="http://localhost:8079/plug-in/Validform/js/Validform_v5.3.1_min_zh-cn.js"></script>
    <script type="text/javascript"
            src="http://localhost:8079/plug-in/Validform/js/Validform_Datatype_zh-cn.js"></script>
    <script type="text/javascript" src="http://localhost:8079/plug-in/Validform/js/datatype_zh-cn.js"></script>
    <script type="text/javascript"
            src="http://localhost:8079/plug-in/Validform/plugin/passwordStrength/passwordStrength-min.js"></script>
    <link rel="stylesheet" href="http://localhost:8079/plug-in/Validform/css/metrole/style.css" type="text/css"/>
    <link rel="stylesheet" href="http://localhost:8079/plug-in/Validform/css/metrole/tablefrom.css" type="text/css"/>
    <script type="text/javascript" src="http://localhost:8079/plug-in/ueditor/ueditor.config.js"></script>
    <script type="text/javascript" src="http://localhost:8079/plug-in/ueditor/ueditor.all.js"></script>
</head>
<body>
<form id="formobj" action="http://localhost:8079/cgFormBuildController.do?saveOrUpdate" name="formobj" method="post">
    <input type="hidden" id="btn_sub" class="btn_sub"/>
    <input type="hidden" name="tableName" value="lte_building_floor">
    <input type="hidden" name="id" value="">
    <input type="hidden" id="create_name" name="create_name" value="">
    <input type="hidden" id="create_by" name="create_by" value="">
    <input type="hidden" id="create_date" name="create_date" value="">
    <input type="hidden" id="update_name" name="update_name" value="">
    <input type="hidden" id="update_by" name="update_by" value="">
    <input type="hidden" id="update_date" name="update_date" value="">
    <table cellpadding="0" cellspacing="1" class="formtable">
        <tr>
            <td align="right">
                <label class="Validform_label">
                    楼宇ID:
                </label>
            </td>
            <td class="value">
                <input id="building_id" name="building_id" type="text"
                       style="width: 150px" class="searchbox-inputtext"
                       onClick="popupClick(this,'building_name','id','pomp_building');"
                       value=""
                       ignore="checked"

                       datatype="*"
                >

                <span class="Validform_checktip"></span>
                <label class="Validform_label" style="display: none;">楼宇ID</label>
            </td>
        </tr>
        <tr>
            <td align="right">
                <label class="Validform_label">
                    楼层名称:
                </label>
            </td>
            <td class="value">
                <input id="floor_name" name="floor_name" type="text"
                       style="width: 150px" class="inputxt" value=""

                       ignore="ignore"

                >
                <span class="Validform_checktip"></span>
                <label class="Validform_label" style="display: none;">楼层名称</label>
            </td>
        </tr>
        <tr>
            <td align="right">
                <label class="Validform_label">
                    楼层编号:
                </label>
            </td>
            <td class="value">
                <input id="floor_no" name="floor_no" type="text"
                       style="width: 150px" class="inputxt" value=""

                       ignore="ignore"

                >
                <span class="Validform_checktip"></span>
                <label class="Validform_label" style="display: none;">楼层编号</label>
            </td>
        </tr>
        <tr>
            <td align="right">
                <label class="Validform_label">
                    楼层属性:
                </label>
            </td>
            <td class="value">
                <input id="floor_property" name="floor_property" type="text"
                       style="width: 150px" class="inputxt" value=""

                       ignore="ignore"

                >
                <span class="Validform_checktip"></span>
                <label class="Validform_label" style="display: none;">楼层属性</label>
            </td>
        </tr>

        <tr>
            <td align="right">
                <label class="Validform_label">
                    楼层描述:
                </label>
            </td>
            <td class="value">
						<textarea id="description" name="description" rows="7" style="width:500px;"
                                  ignore="ignore"


                        ></textarea>
                <span class="Validform_checktip"></span>
                <label class="Validform_label" style="display: none;">楼层描述</label>
                <script type="text/javascript">
                    //实例化编辑器
                    var description_ue = UE.getEditor('description', {initialFrameWidth: 500}).setHeight(260);
                </script>
            </td>
        </tr>
        <tr>
            <td align="right">
                <label class="Validform_label">
                    楼宇备注:
                </label>
            </td>
            <td class="value">
						<textarea id="note" name="note" rows="7" style="width:500px;"
                                  ignore="ignore"


                        ></textarea>
                <span class="Validform_checktip"></span>
                <label class="Validform_label" style="display: none;">楼宇备注</label>
            </td>
        </tr>
        <tr id="sub_tr" style="display: none;">
            <td colspan="2" align="center">
                <input type="button" value="提交" onclick="neibuClick();" class="Button">
            </td>
        </tr>
    </table>
    <script type="text/javascript">$(function () {
        $("#formobj").Validform({
            tiptype: function (msg, o, cssctl) {
                if (o.type == 3) {
                    layer.open({
                        title: '提示信息',
                        content: msg,
                        icon: 5,
                        shift: 6,
                        btn: false,
                        shade: false,
                        time: 5000,
                        cancel: function (index) {
                            o.obj.focus();
                            layer.close(index);
                        },
                        yes: function (index) {
                            o.obj.focus();
                            layer.close(index);
                        },
                    })
                }
            },
            btnSubmit: "#btn_sub",
            btnReset: "#btn_reset",
            ajaxPost: true,
            usePlugin: {
                passwordstrength: {
                    minLen: 6, maxLen: 18, trigger: function (obj, error) {
                        if (error) {
                            obj.parent().next().find(".Validform_checktip").show();
                            obj.find(".passwordStrength").hide();
                        } else {
                            $(".passwordStrength").show();
                            obj.parent().next().find(".Validform_checktip").hide();
                        }
                    }
                }
            },
            callback: function (data) {
                if (data.success == true) {
                    uploadFile(data);
                } else {
                    if (data.responseText == '' || data.responseText == undefined) {
                        $.messager.alert('错误', data.msg);
                        $.Hidemsg();
                    } else {
                        try {
                            var emsg = data.responseText.substring(data.responseText.indexOf('错误描述'), data.responseText.indexOf('错误信息'));
                            $.messager.alert('错误', emsg);
                            $.Hidemsg();
                        } catch (ex) {
                            $.messager.alert('错误', data.responseText + '');
                        }
                    }
                    return false;
                }
                if (!neibuClickFlag) {
                    var win = frameElement.api.opener;
                    win.reloadTable();
                }
            }
        });
    });</script>
</form>
<script type="text/javascript">
    $(function () {
        //查看模式情况下,删除和上传附件功能禁止使用
        if (location.href.indexOf("goDetail.do") != -1) {
            $(".jeecgDetail").hide();
        }

        if (location.href.indexOf("goDetail.do") != -1) {
            //查看模式控件禁用
            $("#formobj").find(":input").attr("disabled", "disabled");
        }
        if (location.href.indexOf("goAddButton.do") != -1 || location.href.indexOf("goUpdateButton.do") != -1) {
            //其他模式显示提交按钮
            $("#sub_tr").show();
        }
    });

    function upload() {
    }

    var neibuClickFlag = false;

    function neibuClick() {
        neibuClickFlag = true;
        $('#btn_sub').trigger('click');
    }

    function cancel() {
    }

    function uploadFile(data) {
        if (!$("input[name='id']").val()) {
            if (data.obj != null && data.obj != 'undefined') {
                $("input[name='id']").val(data.obj.id);
            }
        }
        if ($(".uploadify-queue-item").length > 0) {
            upload();
        } else {
            if (neibuClickFlag) {
                alert(data.msg);
                neibuClickFlag = false;
            } else {
                var win = frameElement.api.opener;
                win.reloadTable();
                win.tip(data.msg);
                frameElement.api.close();
            }
        }
    }

    $.dialog.setting.zIndex = 9999;

    function del(url, obj) {
        $.dialog.confirm("确认删除该条记录?", function () {
            $.ajax({
                async: false,
                cache: false,
                type: 'POST',
                url: url,// 请求的action路径
                error: function () {// 请求失败处理函数
                },
                success: function (data) {
                    var d = $.parseJSON(data);
                    if (d.success) {
                        var msg = d.msg;
                        tip(msg);
                        $(obj).closest("tr").hide("slow");
                    }
                }
            });
        }, function () {
        });
    }

    /**树形列表数据转换**/
    function convertTreeData(rows, textField) {
        for (var i = 0; i < rows.length; i++) {
            var row = rows[i];
            row.text = row[textField];
            if (row.children) {
                row.state = "open";
                convertTreeData(row.children, textField);
            }
        }
    }

    /**树形列表加入子元素**/
    function joinTreeChildren(arr1, arr2) {
        for (var i = 0; i < arr1.length; i++) {
            var row1 = arr1[i];
            for (var j = 0; j < arr2.length; j++) {
                if (row1.id == arr2[j].id) {
                    var children = arr2[j].children;
                    if (children) {
                        row1.children = children;
                    }

                }
            }
        }
    }
</script>
<script type="text/javascript"></script>
</body>
</html>